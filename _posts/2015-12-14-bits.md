---
layout: post
title: Sticky bits
tags: sticky bits, permissions, file deletion restriction
category: blog
permalink: /blog/sticky-bits/
comments: true
---

Sticky bits explained

## sticky bits

-   It actually use to set `setuid` & `setgid`
-   To prevent other users from altering files/directory in a common
    workspace like /var/share or /tmp

    Usage

        chmod +t /var/share

    `-t` is used to protect files within a directory. This is also
    called *restricted deletion flag*

-   In some case you want all user to execute particular binary file
    keeping file ownership to yourself. Suppose the file is
    `/usr/bin/bin2hex`

    In such situation *sticky bit* is handy

        chmod +s /usr/bin/bin2hex

    This will set both setuid & setgid, if you want to have fine
    control, use u+s, or g+s

    Example: setuid ONLY

        chmod u+s /usr/bin/bin2hex

    Example: setgid ONLY

        chmod g+s /usr/bin/bin2hex

    Remove sticky bits using `u-s`, `g-s`

-   Binary implementation
    *Restrict file deletion flag*

        chmod +t /var/share
        # is equivalent to
        chmod 1755 /var/share

    Set both `setuid` and restrict file deletion flag

        chmod 5755 /var/share
        # is equivalent to
        chmod u+s,+t /var/share

- Explanation

    5755

    Lets break it as: 5 755

    755 is `rwx-r-x-r-x`

    5 = 4(setuid or +s) + 1(restrict file deletion flag or +t)

- Another example:

    7755

    7 755

    7 = 4(setuid) + 2(setgid) + 1(restrict file deletion bit)

    A classic example of sticky bit is the permission set on binary
    file `passwd`. Although it is owned by root, `setuid` is set for
    normal users to use the binary file in-order to change password
